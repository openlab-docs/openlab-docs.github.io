
sql
====================================================================================================

개요
----------------------------------------------------------------------------------------------------

SQL 형태의 질의를 합니다.

설명
----------------------------------------------------------------------------------------------------

IRIS의 테이블로 부터, 혹은 파이프(\ ``|``\ ) 로 부터 받은 output에 대하여 SQL 형태의 질의를 합니다. 테이블 이름은 항상 ``angora``\ 이어야 합니다.

Examples
----------------------------------------------------------------------------------------------------

이 전 결과로부터 SQL 형태의 쿼리를 질의합니다.

.. code-block:: none

   ..| sql "SELECT * FROM angora"

syslog 모델에서 HOST 컬럼을 md5해쉬를 통과하여 출력합니다.

.. code-block:: none

   * | sql "select HOST, md5(HOST) as md5 from angora "

sql 문법은 SparkSQL을 따르고 내장된 함수는 `여기 <https://docs.databricks.com/spark/latest/spark-sql/language-manual/functions.html#>`_\ 를 참조하면 됩니다.

Parameters
----------------------------------------------------------------------------------------------------

.. code-block:: none

   ... | sql SQL_QUERY

.. list-table::
   :header-rows: 1

   * - 이름
     - 설명
     - 필수/옵션
   * - SQL_QUERY
     - SQL 쿼리를 의미합니다. 쿼리를 실행할 테이블의 이름은 항상 ``angora``\ 이어야 합니다.
     - 필수


Parameters BNF
----------------------------------------------------------------------------------------------------

.. code-block:: none

   clauses : STRING_TOKEN
           | tokens

   tokens : TOKEN
          | tokens TOKEN
          | tokens STRING_TOKEN

   STRING_TOKEN : (?:"(?:[^"\\n\\r\\\\]|(?:"")|(?:\\\\x[0-9a-fA-F]+)|(?:\\\\.))*")|(?:\'(?:[^\'\\n\\r\\\\]|(?:\'\')|(?:\\\\x[0-9a-fA-F]+)|(?:\\\\.))*\')
   TOKEN : [^ ]+
